{% extends "admin/admin_base.html" %}

{% block custom_css %}
<!--- If required add Custom CSS for this page in this block -->
{% endblock %}


{% block content %}
    <br>
    <main role="main" class="container mt-4">
        <div class="row justify-content-center m-0">
          <div class="col-xl-8 col-lg-8 col-md-10">

            <div class="card p-2">
                <form method="POST" action="{{ url_for('myadmin.competitor_analysis_select_product') }}">			
                    <legend class="border-bottom m-2"><h1>Select Company and Product</h1></legend>
                    <div class="form-group input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"> <i class="fa fa-building"></i> </span>
                        </div>
                        <select name="company" id="company_id" class="form-control custom-select selectpicker" onchange="this.form.submit()" data-live-search="true" data-size="8" required>
                            <option value=""> Select Company </option>
                            {% for item in company_dropdown_options %}
                                <option value= "{{ item }}" {%if  company==item%} selected {%endif%}> {{ item }} </option>"
                            {% endfor %}
                        </select>
                    </div>
                </form>

                <form method="POST" action="{{ url_for('myadmin.competitor_analysis_select_product') }}">
                    <input name="company" value="{{company}}" hidden required>
                    <div class="form-group input-group">
                        <div class="input-group-prepend">
                            <span class="input-group-text"> <i class="fa fa-list"></i> </span>
                        </div>
                        <select name="product" id="product_id" class="form-control custom-select selectpicker" data-live-search="true" data-size="6" required>
                            <option value=""> Select Product </option>
                            {% for item in product_dropdown_options %}
                            <option value= "{{ item }}"> {{ item.split('_')[1] }} </option>"
                            {% endfor %}
                        </select>
                    </div>

                    <div class="row">
                        <div class="col-8 form-group">
                            <button type="submit" class="btn btn-primary btn-block btn-lg"> Submit </button>
                        </div>
                        <div class="col-4 form-group">
                            <a class="btn btn-dark btn-block btn-lg" href="{{ url_for('admin.index') }}"> Go back </a>
                        </div>
                    </div> 
                </form>
            </div>
            <hr>
            <form method="POST" action="{{ url_for('myadmin.competitor_analysis_batch_input') }}" enctype="multipart/form-data" class="card p-2">
			    <legend class="m-2"><h1>CSV Input Competitor Relations</h1></legend>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <span class="input-group-text"> <i class="fa fa-file"></i> .csv</span>
                    </div>
                    <div class="custom-file">
                      <input type="file" oninput="this.form.submit()" class="custom-file-input" name="csv_file" id="csv_file_id" accept=".csv" required>
                      <label class="custom-file-label text-truncate" for="csv_file_id">Select file...</label>
                    </div>
                </div>
            </form>
            <div class="mt-3">
              {% with messages = get_flashed_messages(with_categories=True) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="alert {% if category!='error' %}alert-success{% else %}alert-danger{% endif %} center" role="alert">
                    {{ message }}
                  </div>
                {% endfor %}
              {% endif %}
              {% endwith %}
            </div>
          </div>
        </div>

    </main>
{% endblock %}


{% block custom_js %}
<!-- If required add Custom JS for this page in this block -->
{% endblock %}