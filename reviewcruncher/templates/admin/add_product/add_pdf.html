{% extends "admin/admin_base.html" %}

{% block custom_css %}
<!-- If required add Custom CSS for this page in this block -->
<style>
/* Apply a style to the form container */
form {
    max-width: 450px;
    margin: 0 auto;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

/* Style for labels */
label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
}

/* Style for input fields and file inputs */
input, select {
    width: 100%;
    padding: 8px;
    margin-bottom: 16px;
    box-sizing: border-box;
}

/* Style for the submit button */
button {
    background-color: #4CAF50;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

/* Hover effect for the submit button */
button:hover {
    background-color: #45a049;
}
</style>
{% endblock %}


{% block content %}
    <h1>Add PDF</h1>

    <form method="POST" action="{{ url_for('myadmin.get_service_data') }}" enctype="multipart/form-data" id="myForm">
        <label for="service_name">Service Name:</label>
        <select name="service_name" id="serviceSelect" required>
            <option>Select service </option>
            {% for service in Services %}
                <option value="{{ service.company_name }}">{{ service.company_name }}</option>
            {% endfor %}
        </select>
    </form>    

    <form method="POST" action="{{ url_for('myadmin.add_pdf') }}" enctype="multipart/form-data" id="pdfForm">
        <input type="hidden" name="service_name" value="{{ service_name }}">
        
        <label for="category_name">Category Name:</label>
        <select name="category_name" required>
            <option>Select Category</option>
            {% for category in categories %}
                <option value="{{ category.category_name }}">{{ category.category_name }}</option>
            {% endfor %}
        </select>

        <label for="title">Title:</label>
        <input type="text" name="title" required>

        <label for="author">Author:</label>
        <input type="text" name="author" required>

        <label for="publisher">Publisher:</label>
        <input type="text" name="publisher" required>

        <label for="language">Language:</label>
        <input type="text" name="language" required>

        <label for="pdf_file">PDF File:</label>
        <input type="file" name="pdf_file" accept=".pdf" required>

        <label for="image_file">Image File:</label>
        <input type="file" name="image_file" accept="image/*" required>

        <button type="submit">Add PDF</button>
    </form>
    {% endblock %}

{% block custom_js %}
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
    $(document).ready(function() {
        // Add change event listener to the select element
        $('#serviceSelect').on('change', function() {
            // Submit the form when a service is selected
            $('#myForm').submit();
        });
    });
</script>
{% endblock %}