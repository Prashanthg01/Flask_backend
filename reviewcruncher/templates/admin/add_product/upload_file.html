{% extends "admin/admin_base.html" %}

{% block custom_css %}
<!-- If required add Custom CSS focr this page in this block -->
{% endblock %}


{% block content %}

    <main role="main" class="container mt-5">

    <div class="row justify-content-center  m-0">
      <div class="col-xl-9 col-lg-9 col-md-10">

          <form method="POST" action="{{ url_for('myadmin.upload_multiple_files') }}" enctype="multipart/form-data" class="card p-2 pr-4">
            <legend class="border-bottom"><h1>Add new PDF</h1></legend>

            <div class="form-group input-group m-2">
                <div class="input-group-prepend">
                    <span class="input-group-text"> <i class="fa fa-building"></i> </span>
                </div>
                <select name="company" id="company_id" class="form-control custom-select selectpicker" data-live-search="true" data-size="6" required>
                    <option value=""> Select Company </option>
                    {% for item in company_dropdown_options %}
                    <option value= "{{ item }}"> {{ item }} </option>"
                    {% endfor %}
                </select>
            </div>
            <div class="form-group input-group m-2">
              <div class="input-group-prepend">
                  <span class="input-group-text"> <i class="fa fa-building"></i> </span>
              </div>
              <select name="category" id="category_id" class="form-control custom-select selectpicker" data-live-search="true" data-size="6" required>
                  <option value=""> Select Category </option>
                  {% for item in category_dropdown_options %}
                  <option value="{{ item }}"> {{ item }} </option>
                  {% endfor %}
              </select>
          </div>
            <div class="form-group m-2">
              <div class="custom-file">
                <input type="file"  class="custom-file-input" name="files[]" multiple="true" accept=".pdf" autocomplete="off" required>
                <label class="custom-file-label text-truncate" for="csv_file_id">Select file...</label>
              </div>
            </div>

            <div class="row m-0">
                <div class="col col-lg-8 form-group">
                    <button type="submit" class="btn btn-primary btn-block btn-lg"> Upload </button>
                </div>
                <div class="col col-lg-4 form-group">
                    <a class="btn btn-dark btn-block btn-lg" href="{{ url_for('admin.index') }}"> Go back </a>
                </div>
            </div>
          </form>

          <div class="mt-3">
            {% with messages = get_flashed_messages(with_categories=True) %}
            {% if messages %}
              {% for category, message in messages %}
                <div class="alert {% if category!='error' %}alert-success{% else %}alert-danger{% endif %} center" role="alert">
                  {{ message }}
                </div>
              {% endfor %}
            {% endif %}
            {% endwith %}
          </div>
      </div>
  </div>

</main>
{% endblock %}


{% block custom_js %}

<script type="text/javascript">
$('.custom-file-input').on('change', function() { 
   let fileName = $(this).val().split('\\').pop(); 
   $(this).next('.custom-file-label').addClass("selected").html(fileName); 
});

</script>
{% endblock %}