{% extends 'client/dashboard/base.html' %}

{% block custom_css %}
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">
	<style type="text/css">
		.custom-button-input {
			text-align:left;
			background:none;
			border:0;
			white-space:normal
		}
	</style>
{% endblock %}

{% block content %}

				<!-- Begin Page Content -->
				<div class="container-fluid">

					<!-- Page Heading -->
					<h1 class="h3 mb-2 text-gray-800">Product List</h1>
					<br>
					<p class="mb-4">Here you can find the list of products that you've opted for. Kindly click on a product name to go to its dashboard</p>


					<!-- PreLoader Animation using Bootstrap Modal and Spinner -->
					<div class="modal myPreloader" data-backdrop="static" tabindex="-1" role="dialog" aria-hidden="true">
						<div class="modal-dialog modal-sm modal-dialog-centered" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<div class="spinner-grow text-primary" role="status"></div>
									<h5 class="modal-title" id="mySmallModalLabel">Crunching reviews...</h5>
									<a href="{{ url_for('client.home_product_list') }}" class="close"><span aria-hidden="true">&times;</span></a>
								</div>
							</div>
						</div>
					</div>

					<!-- DataTales Product List Section -->
					<div class="card shadow mb-4">
						<div class="card-header py-3">
							<h6 class="m-0 font-weight-bold text-primary">Product List</h6>
						</div>
						<div class="card-body">
							<div class="table-responsive">
								<table class="table table-bordered table-hover" id="dataTable" width="100%" cellspacing="0">

									<thead>
										<tr>
											<th>Sr.no</th>
											<th>Product Name</th>
											<th>Number of Reviews</th>
											<th>Average Review</th>
										</tr>
									</thead>

									<tbody>
									{% for name_as_input, name_to_display, total_reviews, average_review in zip(product_names, list_of_product_names_to_display, list_of_total_reviews, list_of_average_reviews): %}
										<tr>
											<td> {{ loop.index }} </td>
											<td>
												<form method="POST" action="{{ url_for('client.home_product_list') }}">
													<button name="Product_Name" value="{{ name_as_input }}" type="submit" data-toggle="modal" data-target=".myPreloader" class="custom-button-input">
														{{ name_to_display }}
													</button>
												</form>
											</td>
											<td> {{ total_reviews }} </td>
											<td> {{ average_review }} </td>
										</tr>
									{% endfor %}
									</tbody>

								</table>
							</div>
						</div>
					</div>

				</div>
				<!-- /.container-fluid -->
				<!-- End of Page Content -->

{% endblock %}


{% block custom_js %}
	<!-- Page level plugins -->
	<!-- <script src="{{ url_for('static', filename= 'vendor/datatables/jquery.dataTables.min.js') }}"></script> -->
	<!-- <script src="{{ url_for('static', filename= 'vendor/datatables/dataTables.bootstrap4.min.js') }}"></script> -->

	<script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js"></script>

	<!-- Page level custom scripts -->
	<script src="{{ url_for('static', filename= 'js/demo/datatables-demo.js') }}"></script>

{% endblock %}
